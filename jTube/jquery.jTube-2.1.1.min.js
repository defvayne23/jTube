/*
 * jTube
 * http://jtube.monkeecreate.com
 *
 * jQuery Youtube API Feed Plugin
 *
 * Developed by John Hoover <john@defvayne23.com>
 * Another project from monkeeCreate <http://monkeecreate.com>
 *
 * Version 2.1.1 - Last updated: May 16, 2013
*/
(function(a){a.extend({jTube:function(e){var e=a.extend({request:"",requestValue:"",requestOption:"",format:"flash",order:"",time:"all_time",limit:5,page:1,success:function(i,h){},error:function(h){}},e);var b="http://gdata.youtube.com/feeds/api/";var f=this;var d="";var c=new Date();if(e.order==""){if(e.request=="user"&&e.requestOption=="playlists"){e.order="position"}else{if(e.request=="search"){e.order="relevance"}else{e.order="published"}}}function g(i){var j="([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?";var l=i.match(new RegExp(j));var k=0;var h=new Date(l[1],0,1);if(l[3]){h.setMonth(l[3]-1)}if(l[5]){h.setDate(l[5])}if(l[7]){h.setHours(l[7])}if(l[8]){h.setMinutes(l[8])}if(l[10]){h.setSeconds(l[10])}if(l[12]){h.setMilliseconds(Number("0."+l[12])*1000)}if(l[14]){k=(Number(l[16])*60)+Number(l[17]);k*=((l[15]=="-")?1:-1)}k-=h.getTimezoneOffset();time=(Number(h)+(k*60*1000));return new Date(Number(time))}if(e.request=="user"){if(e.requestOption=="profile"){b+="users/"+e.requestValue+"?"}else{if(e.requestOption==""){e.error("Request option for 'users' was not passed.")}else{b+="users/"+e.requestValue+"/"+e.requestOption+"?"}}}else{if(e.request=="search"){b+="videos?q="+e.requestValue+"&"}else{if(e.request=="feed"){if(e.requestOption==""){b+="standardfeeds/"+e.requestValue+"?"}else{b+="standardfeeds/"+e.requestOption+"/"+e.requestValue+"?"}}else{if(e.request=="playlist"){b+="playlists/"+e.requestValue+"?"}else{if(e.request=="video"){if(e.requestOption=="info"){b+="videos/"+e.requestValue+"?"}else{if(e.requestOption==""){e.error("Request option for 'videos' was not passed.")}else{b+="videos/"+e.requestValue+"/"+e.requestOption+"?"}}}else{e.error("No feed choices given.");return false}}}}}b+="alt=json-in-script&v=2";if((e.request=="user"&&e.requestOption=="profile")||(e.request=="videos"&&e.requestOption=="info")){}else{if(e.request=="video"&&(e.requestOption=="info")){}else{b+="&max-results="+e.limit;b+="&start-index="+(((e.page*e.limit)-e.limit)+1);b+="&orderby="+e.order}if(e.request=="feed"&&(e.requestValue=="most_recent"||e.requestValue=="recently_featured"||e.requestValue=="watch_on_mobile")){}else{b+="&time="+e.time}if(e.format=="mpeg"){b+="&format=6"}else{if(e.format=="h263"){b+="&format=1"}else{b+="&format=5"}}}b+="&callback=?";a.getJSON(b,function(l){if(l!=""&&l!=null){if(e.request=="user"&&e.requestOption=="playlists"){var j=[];a(l.feed.entry).each(function(){var p={id:this.yt$playlistId.$t,title:this.title.$t,summary:this.summary.$t,link:this.link[1].href,hits:this.yt$countHint.$t,published:g(this.published.$t),updated:g(this.updated.$t)};j[j.length]=p});var m=j;if(l.feed){var h=Math.ceil(l.feed.openSearch$totalResults.$t/e.limit)}else{var h=0}}else{if(e.request=="user"&&e.requestOption=="subscriptions"){var o=[];a(l.feed.entry).each(function(){var p={title:this.title.$t,username:this.yt$username.$t,link:this.link[1].href,published:g(this.published.$t),updated:g(this.updated.$t)};o[o.length]=p});var m=o;if(l.feed){var h=Math.ceil(l.feed.openSearch$totalResults.$t/e.limit)}else{var h=0}}else{if(e.request=="user"&&e.requestOption=="contacts"){var k=[];a(l.feed.entry).each(function(){var p={username:this.yt$username.$t,status:this.yt$status.$t,link:this.link[1].href,published:g(this.published.$t),updated:g(this.updated.$t)};k[k.length]=p});var m=k;if(l.feed){var h=Math.ceil(l.feed.openSearch$totalResults.$t/e.limit)}else{var h=0}}else{if(e.request=="user"&&e.requestOption=="profile"){var m={username:l.entry.yt$username.$t,thumbnail:l.entry.media$thumbnail.url,views:l.entry.yt$statistics.viewCount,uploadViews:l.entry.yt$statistics.videoWatchCount,subscribers:l.entry.yt$statistics.subscriberCount,lastLogin:g(l.entry.yt$statistics.lastWebAccess),location:l.entry.yt$location.$t,age:l.entry.yt$age.$t,link:l.entry.link[1].href,title:l.entry.title.$t,published:g(l.entry.published.$t),updated:g(l.entry.updated.$t)};if(l.entry.yt$aboutMe.$t){m.about=l.entry.yt$aboutMe.$t}if(l.entry.yt$gender){m.gender=l.entry.yt$gender.$t}var h=0}else{if(e.request=="video"&&e.requestOption=="comments"){var n=[];a(l.feed.entry).each(function(){var p={author:this.author[0].name.$t,comment:this.content.$t,published:g(this.published.$t),updated:g(this.updated.$t)};n[n.length]=p});var m=n;if(l.feed){var h=Math.ceil(l.feed.openSearch$totalResults.$t/e.limit)}else{var h=0}}else{var i=[];if(e.request=="video"&&e.requestOption=="info"){entry=l.entry}else{entry=l.feed.entry}a(entry).each(function(){if(typeof this.app$control=="undefined"){var p={id:this.media$group.yt$videoid.$t,title:this.media$group.media$title.$t,description:this.media$group.media$description.$t,category:this.media$group.media$category[0].label,keywords:this.media$group.media$keywords.$t,link:this.link[0].href,author:{name:this.author[0].name.$t,link:this.author[0].uri.$t}};if(this.media$group.yt$aspectRatio){p.aspect=this.media$group.yt$aspectRatio.$t}if(this.yt$statistics){p.views=this.yt$statistics.viewCount;p.favorites=this.yt$statistics.favoriteCount}if(this.gd$comments){p.comments=this.gd$comments.gd$feedLink.countHint}if(this.gd$rating){p.rating=this.gd$rating.average;p.raters=this.gd$rating.numRaters}if(this.yt$rating){p.likes=this.yt$rating.numLikes;p.dislikes=this.yt$rating.numDisLikes}if(this.media$group.media$thumbnail){p.thumbnail=this.media$group.media$thumbnail[3].url}videoFormats=[];a(this.media$group.media$content).each(function(){videoFormats[this.yt$format]=this.url});if(e.format=="mpeg"){p.video=videoFormats[6]}else{if(e.format=="h263"){p.video=videoFormats[1]}else{p.video=videoFormats[5]}}if(this.published){p.published=g(this.published.$t)}if(this.published){p.updated=g(this.updated.$t)}if(this.media$group.yt$duration){duration=this.media$group.yt$duration.seconds;hours=0;minutes=0;seconds=0;while(duration>=3600){hours=hours+1;duration=duration-3600}while(duration>=60){minutes=minutes+1;duration=duration-60}seconds=duration;if(seconds<10){seconds="0"+seconds}p.length=minutes+":"+seconds;if(hours>0){p.length=hours+":"+p.length}}i[i.length]=p}});if(e.request=="video"&&e.requestOption=="info"){m=i[0];var h=0}else{m=i;if(l.feed.openSearch$totalResults){var h=Math.ceil(l.feed.openSearch$totalResults.$t/e.limit)}else{var h=0}}}}}}}e.success(m,h)}else{e.error("Bad request.")}});return this},jTubeEmbed:function(d,b){var b=a.extend({width:560,height:340,autoplay:false,fullscreen:false,related:true,loop:false,keyboard:true,genie:false,border:false,highdef:true,start:0},b);var e=d+"&";e+="autoplay="+(b.autoplay?1:0);e+="&fs="+(b.fullscreen?1:0);e+="&rl=1"+(b.related?1:0);e+="&loop=1"+(b.loop?1:0);e+="&disablekb=0"+(b.keyboard?0:1);e+="&egm=1"+(b.genie?1:0);e+="&border=1"+(b.border?1:0);e+="&hd=1"+(b.highdef?1:0);e+="&start="+b.start;var c='<object width="'+b.width+'" height="'+b.height+'">';c+='<param name="movie" value="'+e+'"</param>';c+='<param name="allowScriptAccess" value="always"></param>';if(b.fullscreen==true){c+='<param name="allowFullScreen" value="true"></param>'}c+='<embed src="'+e+'"';c+='    type="application/x-shockwave-flash"';if(b.fullscreen==true){c+='    allowfullscreen="true"'}c+='    allowscriptaccess="always"';c+='    width="'+b.width+'" height="'+b.height+'">';c+="    </embed>";c+="</object>";return c}})})(jQuery);