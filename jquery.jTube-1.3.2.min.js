/**
* jQuery Youtube API Feed Plugin
* @author John Hoover <john@defvayne23.com>
* @version 1.3.2
*/
(function($){$.extend({jTube:function(h){var h=$.extend({user:'',userType:'uploads',search:'',feed:'',playlist:'',format:'flash',order:'published',time:'all_time',limit:5,page:1,success:function(a,b){},error:function(a){}},h);var i='http://gdata.youtube.com/feeds/';var j=this;var k='';if(h.user!='')i+='api/users/'+h.user+'/'+h.userType+'?';else if(h.search!='')i+='api/videos?q='+h.search+'&';else if(h.feed!='')i+='api/standardfeeds/'+h.feed+'?';else if(h.playlist!='')i+='api/playlists/'+h.playlist+'?';else{h.error("No feed choices given.");return false}i+='alt=json';i+='&max-results='+h.limit;i+='&start-index='+(((h.page*h.limit)-h.limit)+1);i+='&orderby='+h.order;i+='&time='+h.time;if(h.format=="mpeg")i+='&format=6';else if(h.format=="h263")i+='&format=1';else i+='&format=5';$.ajax({url:i,dataType:'json',success:function(d){console.log(d);if(d!=null){if(h.user!=''&&h.userType=='playlists'){var e=[];$(d.feed.entry).each(function(){var a={title:this.title.$t,description:this.yt$description.$t,id:this.yt$playlistId.$t,link:this.link[1].href,published:jTubePublished(this.published.$t)};e[e.length]=a});var f=e}else if(h.user!=''&&h.userType=='subscriptions'){var g=[];$(d.feed.entry).each(function(){var a={title:this.title.$t,username:this.yt$username.$t,link:this.link[1].href,thumbnail:this.media$thumbnail.url,published:jTubePublished(this.published.$t),updated:jTubePublished(this.updated.$t)};g[g.length]=a});var f=g}else{var f=[];$(d.feed.entry).each(function(){var b=[];$(this.category).each(function(a){if(a!=0){b[a-1]=this.term}});var c={title:this.title.$t,description:this.media$group.media$description.$t,link:this.link[0].href,categories:b,author:{name:this.author[0].name.$t,link:this.author[0].uri.$t},thumbnail:this.media$group.media$thumbnail[3].url};videoFormats=[];$(this.media$group.media$content).each(function(){videoFormats[this.yt$format]=this.url});if(h.format=="mpeg")c.video=videoFormats[6];else if(h.format=="h263")c.video=videoFormats[1];else c.video=videoFormats[5];if(this.published)c.published=jTubePublished(this.published.$t);if(this.media$group.yt$duration.seconds){duration=this.media$group.yt$duration.seconds;hours=0;minutes=0;seconds=0;while(duration>=3600){hours=hours+1;duration=duration-3600}while(duration>=60){minutes=minutes+1;duration=duration-60}seconds=duration;if(seconds<10)seconds='0'+seconds;c.length=minutes+':'+seconds;if(hours>0)c.length=hours+':'+c.length}if(this.yt$statistics)c.views=this.yt$statistics.viewCount;f[f.length]=c})}pages=Math.ceil(d.feed.openSearch$totalResults.$t/h.limit);h.success(f,pages)}else{h.error("Bad request.")}}});return this},jTubeEmbed:function(a,b){var b=$.extend({width:290,height:250,autoplay:true,fullscreeen:false,related:true,loop:false,keyboard:true,genie:false,border:false,highdef:true,start:0},b);var c=a+"?";c+='autoplay='+(b.autoPlay?1:0);c+='&fs='+(b.fullscreen?1:0);c+='&rl=1'+(b.related?1:0);c+='&loop=1'+(b.loop?1:0);c+='&disablekb=0'+(b.keyboard?0:1);c+='&egm=1'+(b.genie?1:0);c+='&border=1'+(b.border?1:0);c+='&hd=1'+(b.highdef?1:0);c+='&start='+b.start;var d='<object width="'+b.width+'" height="'+b.height+'">';d+='<param name="movie" value="'+c+'"</param>';d+='<param name="allowScriptAccess" value="always"></param>';if(b.fullscreen==true)d+='<param name="allowFullScreen" value="true"></param>';d+='<embed src="'+c+'"';d+='    type="application/x-shockwave-flash"';if(b.fullscreen==true)d+='    allowfullscreen="true"';d+='    allowscriptaccess="always"';d+='    width="'+b.width+'" height="'+b.height+'">';d+='    </embed>';d+='</object>';return d},})})(jQuery);function jTubePublished(a){a=a.match(/([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})/);meridiem="pm";hour=a[4];if(hour<12){meridiem="am"}else{if(hour>12)hour=hour-12}return{year:a[1],month:a[2],day:a[3],hour:hour,minute:a[5],seconds:a[6],meridiem:meridiem}}